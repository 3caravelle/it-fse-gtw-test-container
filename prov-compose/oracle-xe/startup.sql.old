create user provisioning identified by provisioning;
GRANT ALL PRIVILEGES TO provisioning;
CONNECT provisioning/provisioning@localhost:1521/xe DECLARE region_count INTEGER;
CURSOR region_table is SELECT COUNT(*) FROM all_tables WHERE table_name = 'REGION' AND owner = 'PROVISIONING';
BEGIN dbms_output.put_line('Here');
OPEN region_table;
FETCH region_table INTO region_count;
CLOSE region_table;
dbms_output.put_line('Closed');
EXCEPTION WHEN NO_DATA_FOUND THEN dbms_output.put_line('No region found');
region_count := 0;
WHEN OTHERS THEN RAISE;
END;
DECLARE role_count INTEGER;
CURSOR role_table is SELECT COUNT(*) FROM all_tables WHERE table_name = 'ROLE' AND owner = 'PROVISIONING';
BEGIN dbms_output.put_line('Here');
OPEN role_table;
FETCH role_table INTO role_count;
CLOSE role_table;
dbms_output.put_line('Closed');
EXCEPTION WHEN NO_DATA_FOUND THEN dbms_output.put_line('No role found');
role_count := 0;
WHEN OTHERS THEN RAISE;
END;
IF region_count = 0 THEN 
CREATE TABLE provisioning.REGION ( REG_ID VARCHAR(255) PRIMARY KEY, REG_NAME VARCHAR(255) );
INSERT INTO provisioning.REGION(REG_ID, REG_NAME) VALUES ('001', 'SASN');
INSERT INTO provisioning.REGION(REG_ID, REG_NAME) VALUES ('010', 'Regione Piemonte');
INSERT INTO provisioning.REGION(REG_ID, REG_NAME) VALUES ('020', 'Regione Valle d''Aosta');
INSERT INTO provisioning.REGION(REG_ID, REG_NAME) VALUES ('030', 'Regione Lombardia');
INSERT INTO provisioning.REGION(REG_ID, REG_NAME) VALUES ('041', 'P.A. Bolzano');
INSERT INTO provisioning.REGION(REG_ID, REG_NAME) VALUES ('042', 'P.A. Trento');
INSERT INTO provisioning.REGION(REG_ID, REG_NAME) VALUES ('050', 'Regione Veneto');
INSERT INTO provisioning.REGION(REG_ID, REG_NAME) VALUES ('060', 'Regione Friuli Venezia Giulia');
INSERT INTO provisioning.REGION(REG_ID, REG_NAME) VALUES ('070', 'Regione Liguria');
INSERT INTO provisioning.REGION(REG_ID, REG_NAME) VALUES ('080', 'Regione Emilia-Romagna');
INSERT INTO provisioning.REGION(REG_ID, REG_NAME) VALUES ('090', 'Regione Toscana');
INSERT INTO provisioning.REGION(REG_ID, REG_NAME) VALUES ('100', 'Regione Umbria');
INSERT INTO provisioning.REGION(REG_ID, REG_NAME) VALUES ('110', 'Regione Marche');
INSERT INTO provisioning.REGION(REG_ID, REG_NAME) VALUES ('120', 'Regione Lazio');
INSERT INTO provisioning.REGION(REG_ID, REG_NAME) VALUES ('130', 'Regione Abruzzo');
INSERT INTO provisioning.REGION(REG_ID, REG_NAME) VALUES ('140', 'Regione Molise');
INSERT INTO provisioning.REGION(REG_ID, REG_NAME) VALUES ('150', 'Regione Campania');
INSERT INTO provisioning.REGION(REG_ID, REG_NAME) VALUES ('160', 'Regione Puglia');
INSERT INTO provisioning.REGION(REG_ID, REG_NAME) VALUES ('170', 'Regione Basilicata');
INSERT INTO provisioning.REGION(REG_ID, REG_NAME) VALUES ('180', 'Regione Calabria');
INSERT INTO provisioning.REGION(REG_ID, REG_NAME) VALUES ('190', 'Regione Sicilia');
INSERT INTO provisioning.REGION(REG_ID, REG_NAME) VALUES ('200', 'Regione Sardegna');
INSERT INTO provisioning.REGION(REG_ID, REG_NAME) VALUES ('999', 'Ministero della Salute');
INSERT INTO provisioning.REGION(REG_ID, REG_NAME) VALUES ('000', 'INI');
INSERT INTO provisioning.REGION(REG_ID, REG_NAME) VALUES ('111', 'Regione Fittizia');
END IF;
IF role_count = 0 THEN 
CREATE TABLE provisioning.ROLE ( ROL_ID NUMBER(19,0) PRIMARY KEY, ROL_NAME VARCHAR(255) );
INSERT INTO provisioning.ROLE(ROL_ID, ROL_NAME) VALUES ('1', 'Regione');
INSERT INTO provisioning.ROLE(ROL_ID, ROL_NAME) VALUES ('2', 'Amministratore Regionale');
INSERT INTO provisioning.ROLE(ROL_ID, ROL_NAME) VALUES ('3', 'Amministratore Aziendale');
INSERT INTO provisioning.ROLE(ROL_ID, ROL_NAME) VALUES ('4', 'Amministratore Privato');
INSERT INTO provisioning.ROLE(ROL_ID, ROL_NAME) VALUES ('5', 'Soggetto Responsabile');
END IF;
